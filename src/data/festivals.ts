// 节日问候语映射
export const festivalGreetings: { [key: string]: string } = {
  // 一月
  '元旦': '元旦快乐！新的一年，愿你健康平安，万事如意！🎊',
  '腊八': '腊八节快乐！喝一碗暖心的腊八粥，驱寒迎新年！🥣',
  '小年': '小年好！灶王爷上天言好事，愿你来年福气满满！🧧',
  '小寒': '小寒时节，天气渐寒，记得添衣保暖，照顾好自己！❄️',
  '大寒': '大寒已至，冬意正浓，多喝热水，温暖过冬！☕',
  
  // 二月
  '情人节': '情人节快乐！愿你被爱包围，幸福甜蜜！💝',
  '立春': '立春到，春意萌，万物复苏展新容！🌸',
  '雨水': '雨水时节，春雨贵如油，愿你生活滋润美好！🌧️',
  '元宵节': '元宵节快乐！花好月圆人团圆，愿你阖家幸福！🏮',
  '除夕': '除夕夜，辞旧岁，愿来年所有美好如期而至！🎆',
  '春节': '春节快乐！恭喜发财，万事如意，新春大吉！🧨',
  
  // 三月
  '妇女节': '妇女节快乐！致敬每一位伟大的女性！👩',
  '植树节': '植树节，种下绿色，播种希望，爱护地球家园！🌳',
  '惊蛰': '惊蛰至，春雷响，万物生长正当时！⚡',
  '春分': '春分时节，昼夜平分，春色满园关不住！🌼',
  '龙抬头': '二月二龙抬头，祝你龙年行大运，鸿运当头！🐉',
  
  // 四月
  '清明': '清明时节，慎终追远，缅怀先人，珍惜当下！🌿',
  '谷雨': '谷雨时节，春雨润物，播种希望，收获成长！🌾',
  '愚人节': '愚人节快乐！今天可以开心地开个小玩笑！🃏',
  '世界地球日': '世界地球日，保护环境从我做起，爱护我们的家园！🌍',
  
  // 五月
  '劳动节': '劳动节快乐！向每一位辛勤劳动者致敬！💪',
  '青年节': '青年节快乐！愿你永葆青春活力，追逐梦想！🎯',
  '母亲节': '母亲节快乐！感恩母爱如山，祝妈妈健康幸福！💐',
  '立夏': '立夏已至，夏日来临，愿你清凉一夏，快乐无限！☀️',
  '小满': '小满时节，万物生长，愿你收获满满，小得盈满！🌱',
  '护士节': '护士节快乐！致敬白衣天使，感恩你们的无私奉献！👩‍⚕️',
  
  // 六月
  '儿童节': '儿童节快乐！愿你永葆童心，快乐无忧！🎈',
  '端午节': '端午节安康！吃粽子，赛龙舟，驱邪避瘟保健康！🍚',
  '父亲节': '父亲节快乐！感恩父爱如山，祝爸爸身体健康！👔',
  '芒种': '芒种时节，麦浪滚滚，辛勤耕耘终有收获！🌾',
  '夏至': '夏至已至，白昼最长，愿你拥有最灿烂的时光！🌞',
  '高考': '高考加油！十年寒窗终有报，愿你金榜题名！📝',
  
  // 七月
  '建党节': '建党节，不忘初心，牢记使命，砥砺前行！🚩',
  '小暑': '小暑时节，炎炎夏日，记得防暑降温，清凉度夏！🍉',
  '大暑': '大暑来临，酷暑难耐，多喝水，注意防暑！🥤',
  '世界人口日': '世界人口日，关注人类发展，共创美好未来！👥',
  
  // 八月
  '建军节': '建军节，向人民军队致敬！保家卫国，无上荣光！🎖️',
  '七夕': '七夕节快乐！鹊桥相会，愿有情人终成眷属！💑',
  '中元节': '中元节，慎终追远，缅怀先人，珍惜当下！🕯️',
  '立秋': '立秋至，暑渐消，秋高气爽好时节！🍂',
  '处暑': '处暑时节，暑气渐消，秋意渐浓，注意早晚温差！🌾',
  
  // 九月
  '教师节': '教师节快乐！感恩恩师，桃李满天下！📚',
  '中秋节': '中秋节快乐！花好月圆人团圆，阖家幸福安康！🥮',
  '白露': '白露时节，秋意渐浓，早晚添衣，谨防秋燥！💧',
  '秋分': '秋分时节，昼夜均分，秋高气爽正当时！🍁',
  '世界旅游日': '世界旅游日，出发吧！世界那么大，去看看！✈️',
  
  // 十月
  '国庆节': '国庆节快乐！祝福祖国繁荣昌盛，人民幸福安康！🇨🇳',
  '重阳节': '重阳节快乐！登高望远，敬老爱老，愿健康长寿！🏔️',
  '万圣节': '万圣节快乐！不给糖就捣蛋，祝你度过有趣的一天！🎃',
  '寒露': '寒露时节，天气转凉，记得添衣保暖！🧥',
  '霜降': '霜降至，深秋寒，注意保暖，健康过冬！🍂',
  '世界粮食日': '世界粮食日，珍惜每一粒粮食，光盘行动从我做起！🌾',
  
  // 十一月
  '双十一': '双十一购物节，理性消费，开心购物！🛒',
  '感恩节': '感恩节快乐！感恩相遇，感恩陪伴，感恩有你！🦃',
  '立冬': '立冬至，冬季始，添衣保暖，健康过冬！⛄',
  '小雪': '小雪时节，初雪飘飘，愿你温暖如春！❄️',
  '消防日': '消防宣传日，关注消防安全，平安你我他！🚒',
  
  // 十二月
  '大雪': '大雪纷飞，银装素裹，愿你温暖过冬，平安喜乐！⛷️',
  '冬至': '冬至到，吃饺子，阖家团圆暖心窝！🥟',
  '平安夜': '平安夜，祝你平安喜乐，幸福美满！🎄',
  '圣诞节': '圣诞节快乐！愿你收到满满的祝福和礼物！🎅',
  
  // 特殊彩蛋问候
  '程序员节': '1024程序员节快乐！向所有程序员致敬！Hello World！💻',
  '世界睡眠日': '世界睡眠日，今晚早点睡，美梦伴你行！😴',
  '世界读书日': '世界读书日，读一本好书，开启智慧之旅！📖',
  '世界微笑日': '世界微笑日，今天记得多微笑，传递快乐！😊',
  '世界卫生日': '世界卫生日，关注健康，从点滴做起！🏥',
  '世界环境日': '世界环境日，保护环境，人人有责！🌱',
  '国际音乐日': '国际音乐日，聆听美妙旋律，让音乐治愈心灵！🎵',
  '世界动物日': '世界动物日，关爱动物，保护地球上的每一个生命！🐾',
  '国际幸福日': '国际幸福日，愿你每天都充满幸福和快乐！🌈',
  '世界水日': '世界水日，节约用水，珍惜每一滴水资源！💧'
};

// 公历固定节日
export const solarFestivals: { [key: string]: string } = {
  '01-01': '元旦',
  '02-14': '情人节',
  '03-08': '妇女节',
  '03-12': '植树节',
  '03-20': '国际幸福日',
  '03-21': '世界睡眠日',
  '03-22': '世界水日',
  '04-01': '愚人节',
  '04-05': '清明',
  '04-07': '世界卫生日',
  '04-22': '世界地球日',
  '04-23': '世界读书日',
  '05-01': '劳动节',
  '05-04': '青年节',
  '05-08': '世界微笑日',
  '05-12': '护士节',
  '06-01': '儿童节',
  '06-05': '世界环境日',
  '06-07': '高考',
  '06-08': '高考',
  '07-01': '建党节',
  '07-11': '世界人口日',
  '08-01': '建军节',
  '09-10': '教师节',
  '09-27': '世界旅游日',
  '10-01': '国庆节',
  '10-04': '世界动物日',
  '10-16': '世界粮食日',
  '10-24': '程序员节',
  '10-31': '万圣节',
  '11-09': '消防日',
  '11-11': '双十一',
  '12-24': '平安夜',
  '12-25': '圣诞节'
};

// 农历节日（2026年公历对照，每年需更新）
// 2026年农历节日对应的公历日期
export const lunarFestivals2026: { [key: string]: string } = {
  '01-07': '腊八',        // 腊月初八
  '02-06': '小年',        // 腊月廿三（北方小年）
  '02-07': '小年',        // 腊月廿四（南方小年）
  '02-16': '除夕',        // 除夕
  '02-17': '春节',        // 正月初一
  '03-03': '元宵节',      // 正月十五
  '03-08': '龙抬头',      // 二月初二（与妇女节同日）
  '05-31': '端午节',      // 五月初五
  '08-08': '七夕',        // 七月初七
  '08-22': '中元节',      // 七月十五
  '10-04': '中秋节',      // 八月十五（与世界动物日同日）
  '10-25': '重阳节'       // 九月初九
};

// 2026年二十四节气（根据天文计算的精确日期）
export const solarTerms2026 = [
  { name: '小寒', date: '01-05' },
  { name: '大寒', date: '01-20' },
  { name: '立春', date: '02-04' },
  { name: '雨水', date: '02-18' },
  { name: '惊蛰', date: '03-05' },
  { name: '春分', date: '03-20' },
  { name: '清明', date: '04-04' },
  { name: '谷雨', date: '04-20' },
  { name: '立夏', date: '05-05' },
  { name: '小满', date: '05-21' },
  { name: '芒种', date: '06-05' },
  { name: '夏至', date: '06-21' },
  { name: '小暑', date: '07-07' },
  { name: '大暑', date: '07-22' },
  { name: '立秋', date: '08-07' },
  { name: '处暑', date: '08-23' },
  { name: '白露', date: '09-07' },
  { name: '秋分', date: '09-23' },
  { name: '寒露', date: '10-08' },
  { name: '霜降', date: '10-23' },
  { name: '立冬', date: '11-07' },
  { name: '小雪', date: '11-22' },
  { name: '大雪', date: '12-07' },
  { name: '冬至', date: '12-21' }
];

// 保留旧的节气数组用于向后兼容
export const solarTerms = solarTerms2026;

// 母亲节：5月第二个星期日
// 父亲节：6月第三个星期日
// 感恩节：11月第四个星期四
export const getSpecialDateFestivals = (date: Date): string | null => {
  const month = date.getMonth() + 1;
  const day = date.getDate();
  const dayOfWeek = date.getDay();
  
  // 母亲节：5月第二个星期日
  if (month === 5 && dayOfWeek === 0) {
    const weekOfMonth = Math.ceil(day / 7);
    if (weekOfMonth === 2) return '母亲节';
  }
  
  // 父亲节：6月第三个星期日
  if (month === 6 && dayOfWeek === 0) {
    const weekOfMonth = Math.ceil(day / 7);
    if (weekOfMonth === 3) return '父亲节';
  }
  
  // 感恩节：11月第四个星期四
  if (month === 11 && dayOfWeek === 4) {
    const weekOfMonth = Math.ceil(day / 7);
    if (weekOfMonth === 4) return '感恩节';
  }
  
  // 国际音乐日：10月1日（与国庆同日，优先显示国庆）
  
  return null;
};

export const traditionalFestivals = {
  solar: solarFestivals,
  lunar: lunarFestivals2026
};

// 获取指定日期的所有节日（包括特殊计算的节日）
export const getFestivalForDate = (date: Date): string[] => {
  const festivals: string[] = [];
  const monthDay = `${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')}`;
  
  // 检查公历节日
  if (solarFestivals[monthDay]) {
    festivals.push(solarFestivals[monthDay]);
  }
  
  // 检查农历节日（2026年）
  if (lunarFestivals2026[monthDay]) {
    festivals.push(lunarFestivals2026[monthDay]);
  }
  
  // 检查特殊计算的节日（母亲节、父亲节、感恩节）
  const specialFestival = getSpecialDateFestivals(date);
  if (specialFestival) {
    festivals.push(specialFestival);
  }
  
  // 检查二十四节气（2026年）
  const solarTerm = solarTerms2026.find(term => term.date === monthDay);
  if (solarTerm) {
    festivals.push(solarTerm.name);
  }
  
  // 去重
  return [...new Set(festivals)];
};

// 获取节日问候语
export const getFestivalGreeting = (festivalName: string): string | null => {
  return festivalGreetings[festivalName] || null;
};

export const getLunarDate = (date: Date): string => {
  // 简化版农历显示，实际项目中需要使用专门的农历转换库
  const lunarMonths = ['正月', '二月', '三月', '四月', '五月', '六月', 
                      '七月', '八月', '九月', '十月', '冬月', '腊月'];
  const lunarDays = ['初一', '初二', '初三', '初四', '初五', '初六', '初七', '初八', '初九', '初十',
                    '十一', '十二', '十三', '十四', '十五', '十六', '十七', '十八', '十九', '二十',
                    '廿一', '廿二', '廿三', '廿四', '廿五', '廿六', '廿七', '廿八', '廿九', '三十'];
  
  // 这里是简化的农历计算，实际应该使用准确的农历转换算法
  const month = date.getMonth();
  const day = date.getDate() % 30;
  
  return `${lunarMonths[month]}${lunarDays[day]}`;
};
